-- Создание таблицы описания грузового вагона

CREATE TABLE wagon (
  wagon_id INTEGER PRIMARY KEY,
  wagon_type VARCHAR(100)
  );
INSERT INTO wagon VALUES
('1', 'Open wagon'),-- Полувагон
('2', 'Flat wagon'),-- Платформа
('3', 'Covered wagon'),-- Крытый вагон
('4', 'Tank wagon');-- Цистерна

-- Создание таблицы деталей вагона

CREATE TABLE detail (
  detail_id INTEGER PRIMARY KEY,
  -- wagon_id INTEGER,
  detail_name VARCHAR
 );

INSERT INTO detail VALUES
('1', 'wheelset'), -- колесная пара
('2', 'truck bolster'), -- надрессорная балка
('3', 'side frame'), -- боковая рама
('4', 'coupler'); -- тяговый хомут

-- Создание справочника депо

CREATE TABLE depot_name (
  ID INTEGER PRIMARY KEY,
  depot_name VARCHAR (100)
);

INSERT INTO depot_name VALUES
('1', 'central_depot'),
('2', 'north_depot'),
('3', 'south_depot'),
('4', 'east_depot'),
('5', 'west_depot'),
('6', 'reserve_depot');

-- Создание таблицы депо

CREATE TABLE depot (
  ID INTEGER,
  depot_id INTEGER REFERENCES depot_name(id),
  detail_id INTEGER REFERENCES detail(detail_id),
  detail_quantity INTEGER
 );

INSERT INTO depot VALUES
('1', 1, 1, 20),
('2', 1, 2, 40),
('3', 1, 3, 25),
('4', 1, 4, 15),
('5', 2, 1, 15),
('6', 2, 2, 16),
('7', 2, 3, 17),
('8', 3, 1, 18),
('9', 3, 2, 20),
('10', 3, 4, 17),
('11', 4, 3, 21),
('12', 4, 4, 25),
('13', 5, 1, 30),
('14', 5, 2, 15),
('15', 5, 3, 8),
('16', 5, 4, 11), 
('17', 6, 2, 19),
('18', 6, 3, 15),
('19', 6, 4, 14);

-- Создание таблицы ремонтов

CREATE TABLE wagon_repair (
  repair_id INTEGER,
  wagon_id INTEGER REFERENCES wagon(wagon_id),
  numb VARCHAR(10),
  detail_id INTEGER REFERENCES detail(detail_id),
  detail_number INTEGER,
  depot_id INTEGER REFERENCES depot_name(id),
  repair_type VARCHAR(100),
  price numeric
  );

INSERT INTO wagon_repair VALUES
('1', '1', '1o', '1', 2, '1', 'замена', 80000),
('2', '1', '2o', '2', 1, '1', 'замена', 10000),
('3', '1', '3o', '1', 1, '2', 'замена', 40000),
('4', '1', '3o', '3', 1, '2', 'замена', 20000),
('5', '1', '4o', '4', 2, '2', 'замена', 30000),
('6', '1', '5o', '3', 3, '3', 'замена', 60000),
('7', '1', '5o', '1', 2, '3', 'замена', 80000),
('8', '1', '5o', '4', 1, '3', 'замена', 15000),
('9', '2', '1f', '1', 2, '4', 'покупка', 160000),
('10', '2', '2f', '1', 1, '4', 'покупка', 80000),
('11', '2', '3f', '2', 2, '4', 'покупка', 40000),
('12', '2', '3f', '3', 1, '4', 'покупка', 40000),
('13', '2', '3f', '4', 1, '4', 'покупка', 30000),
('14', '2', '4f', '1', 2, '4', 'покупка', 160000),
('15', '3', '1с', '1', 1, '5', 'замена', 40000),
('16', '3', '1с', '4', 2, '5', 'замена', 30000),
('17', '3', '1с', '3', 1, '5', 'замена', 40000),
('18', '3', '2с', '1', 1, '5', 'покупка', 80000),
('19', '3', '2с', '2', 1, '5', 'покупка', 20000),
('20', '3', '3c', '4', 2, '5', 'покупка', 60000),
('21', '3', '4c', '2', 4, '5', 'покупка', 80000),
('22', '4', '1t', '1', 1, '6', 'замена', 40000),
('23', '4', '1t', '2', 1, '6', 'замена', 10000),
('24', '4', '1t', '3', 1, '6', 'замена', 20000),
('25', '4', '1t', '4', 1, '6', 'замена', 15000),
('26', '4', '2t', '2', 2, '6', 'замена', 20000),
('27', '4', '3t', '1', 2, '6', 'замена', 80000),
('28', '4', '4t', '4', 1, '6', 'покупка', 30000),
('29', '4', '5t', '1', 1, '6', 'покупка', 80000),
('30', '4', '6t', '2', 2, '6', 'покупка', 40000),
('31', '4', '7t', '1', 1, '6', 'покупка', 80000),
('32', '4', '7t', '2', 2, '6', 'замена', 20000);
